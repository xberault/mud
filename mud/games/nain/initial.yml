---
id: accueil-000
type: Location
contains:
  - koala-000
parts:
  - nez-koala-000
events:
  info:
    actor: "Salle sombre"
  look:
    actor: |
      Vous vous réveillez au milieu d'une petite salle, légèrement
      éclairée par une torche murale. À côté de cette torche, vous
      voyez une statue d'une cinquantaine de centimètres. Vous voyez
      au dessus de vous une trappe menant vers un étage.
  nez-koala:
    observer : |
      Un bruit de friction entre deux roches se fait entendre.
      Une porte s'est ouverte sur un mur de la salle. Votre instinct
      vous indique que cette porte est au norde de votre salle.
---
id: koala-000
type: Thing
names:
  - koala
  - statue
events:
  info:
    actor: "Une statue de pierre"
  look:
    actor: |
      Une statue de pierre.
      Même si vous ne vous souvenez pas en avoir vu un seul dans
      votre vie, vous êtes persuadé qu'il s'agit d'un koala. Vous
      remarquez que son nez est étrangement sculpté.
---
id: nez-koala-000
type: Thing
name:
  - nez
props:
  - pushable
events:
  look:
    actor: |
      Le nez de la statue du koala.
      Vous remarquez que son nez est étangement sculpté. En effet,
      il semble qu'il soit détaché du reste de la statue, comme s'il
      avait été rajouté des années plus tard...
  push:
    actor: |
      Vous appuyez sur le nez du koala.
    observer: |
      {{actor.name}} appuie sur le nez du koala.
    effects:
      - type : ChangePropEffect
        modifs: -pushable
      - type : ChangePropEffect
        modifs: =salle1-000-sud:activated
      - type : ChangePropEffect
        modifs: =accueil-000-nord:activated
      - type : NarrativeEffect
        at : =accueil-000
        key : nez-koala
---
id: portal-accueil-salle1-000
type: Portal
exits:
  - id: accueil-000-nord
    location: accueil-000
    direction: nord
    # props:
    #   - for-leave
    events:
      enter-portal:
        - props: exit:activated
          actor: "Vous passez la petite porte sans vous baisser."
          observer: "{{actor.name}} passe la petite porte."
        - actor: "Vous foncez tête baissée dans un mur, vous avez mal au front."
          observer: "{{actor.name}} fonce tête baissée dans le mur nord. Il jure."
          data-driven: true
  - id: salle1-000-sud
    location: salle1-000
    direction: sud
    # props:
    #   - for-leave
    events:
      enter-portal:
        - props: exit:activated
          actor: "Vous passez la petite porte."
          observer: "{{actor.name}} passe la petite porte au sud."
        - actor: "Vous foncez tête baissée dans un mur, vous avez mal au front."
          observer: "{{actor.name}} fonce tête baissée dans le mur sud. Il jure."
          data-driven: true
---
id: salle1-000
type: Location
parts:
  - chien-000
  - trappe-000
events:
  info:
    actor: "Large couloir"
  look:
    actor: |
      Vous êtes dans un large couloir, assez bien éclairé par des torches murales.
      À cinq mètres devant vous, vous remarquez un chien qui agite étrangement ses
      babines. Vous distinguez difficilement, au fond de la salle, une grande porte
      de pierre.
  # bark:
  #     actor: |
  #       Vous aboyez excellement bien.
  #     observer: |
  #       Vous entendez {{ actor.name }} exceller à ses talents de chien.
  #     effects:
  #       - type: ChangePropEffect
  #         modifs: =salle2-000-sud:activated
  #       - type: ChangePropEffect
  #         modifs: =salle1-000-nord:activated
  #       - type: NarrativeEffect
  #         at: =salle1-000
  #         key: porteouverte
  # un nain ne sait pas aboyer
  porteouverte:
    observer: |
      La grande porte du nord semble s'être entreouverte et vous devriez pouvoir vous y faufiler.
---
id: chien-000
type: Thing
name:
  - chien
events:
  look:
    actor: |
      Vous remarquez que si le chien agite ses babines, c'est parce qu'il parle.
      Vous vous approchez et entendez difficilement : <br>
      <i>"...core ob**gé de re***r i** pou* guid** ces a****is de bi*èdes... ah ** va
      m'en****re c'est **r... oh a*****on en *oilà un, tiens... plus p**i* q** *es
      au***s ce**i-là...".</i><br>
      Vous êtes maintenant à un mètre du chien. Celui-ci se redresse.
      Il ne semble pas très grand mais son museau vous arrive tout de même à votre ventre
      gargouillant. "Waf waf" dit le chien qui n'a plus l'air de vouloir parler. <br>
      <button id="btEat" type="button" class="btn btn-primary" onclick="btEat()">Essayer de le manger</button>
      <button id="btTouch" type="button" class="btn btn-warning" onclick="btTouch()">Le caresser</button>
    effects:
      - type: ChangePropEffect
        modifs: object:cannot-look #marche pas encore
---
id: trappe-000
type: Thing
name: trappe
gender: fem
events:
  look:
    actor: |
      Vous vous approchez doucement de la trappe pour l'observer. Vous vous mettez à plat ventre et
      apercevez le chien. Il aboie et vous vous relevez en sursautant.
    observer: |
      {{actor.name}} s'approche d'une trappe à côté de la grande porte. Il s'allonge et vous entendez
      un chien aboyer.
    effects:
        - type: ChangePropEffect
          modifs: =salle2-000-sud:activated
        - type: ChangePropEffect
          modifs: =salle1-000-nord:activated
        - type: NarrativeEffect
          at: =salle1-000
          key: porteouverte
---
id: portal-salle1-salle2-000
type: Portal
exits:
  - id: salle1-000-nord
    location: salle1-000
    direction: nord
    # props:
    #   - for-leave
    events:
      enter-portal:
        - props: exit:activated
          actor: "Vous passez par la grande porte de pierre."
          observer: "{{actor.name}} passe par la grande porte de pierre au fond du couloir."
        - actor: "La porte ne veut définitivement pas s'ouvrir."
          observer: "{{actor.name}} pousse en vain la grande porte de pierre."
          data-driven: true
  - id: salle2-000-sud
    location: salle2-000
    direction: sud
    # props:
    #   - for-leave
    events:
      enter-portal:
        - props: exit:activated
          actor: "Vous passez par la grande porte de pierre."
          observer: "{{actor.name}} passe par la grande porte de pierre au sud."
        - actor: "La porte ne veut pas s'ouvrir. Il semble qu'elle ne s'ouvre que de l'autre côté"
          observer: "{{actor.name}} pousse en vain la grande porte de pierre."
          data-driven: true
---
id: salle2-000
type: Location
parts:
   - chien-001
   - armoire-000
   - porte-000
events:
  info:
    actor: "Grande salle"
  look:
    actor: |
      Vous êtes dans une très grande salle. Le plafond a l'air si haut qu'il vous est
      difficile de savoir s'il y en a vraiment un. La grandeur de cette salle est
      accentuée par le vide qui l'habite. Vous ne voyez qu'une grande armoire sur votre
      gauche. Vous retrouvez le chien au centre de la salle.
---
id: chien-001
type: Thing
name: chien
props:
  - pushable
events:
  look:
    actor: |
      Le chien agite la queue. Il vous observe, comme s'il attendez quelque chose de vous.
  push:
    actor: |
      Vous touchez le chien. À ce moment là, il court vers l'armoire et vous présente un bâton.
---
id: baton-000
type: Thing
props:
  -takable
events:
  info:
    actor: "Un bâton."
  look:
    actor: "Un bâton d'une vingtaine de centimètres de long."
  take:
    actor: "Vous prenez le bâton. À cet instant, le chien remue la queue de plus belle."
---
id: armoire-000
type: Container
name: armoire
contains:
  - escabeau-000
  - cle-armoire-000
  - baton-000
events:
  look:
    actor: |
      L'armoire est très imposante. Elle semble faite d'un bois que vous n'avez jamais vu.
      En haut de cette armoire, vous voyez un escabeau. Et à ses pied, vous voyez un bâton.
      Lorsque vous regardez par la serrure de l'armoire, vous distinguez une clé.<br>
      À droite de cette armoire, vous remarquez une petite porte en bois.
---
id: escabeau-000
type: Thing
name: escabeau
events:
  look:
    actor: |
      Un escabeau tout à fait banal. Sur les deux côtés vous lisez des lettres incrustées dans le bois.
      Vous lisez : <i> T O I Δ L F M E N I </i> du côté gauche, et <i> I M U T I _ F </i>
      du côté droit.
---
id: cle-armoire-000
type: Thing
names:
  - clé
  - cle
  - clef
gendre: fem
events:
  look:
    actor: |
      En regardant attentivement la dentition de la clé, vous devinez qu'elle ouvre la serrure par
      laquelle vous la regarder. Vous apercevez aussi, sur son embase, un symbole formant la tête
      d'un koala.
---
id: porte-000
type: Thing
name: porte
gender: fem
props:
  - takable
  - pushable
events:
  info:
    actor: "Une vieille porte en bois"
  look:
    actor: |
      C'est une petite porte en bois. Elle fait 1m20 de haut, pour 50cm de large. Elle est si vieille
      que vous ne comprenez pas comment elle tient encore sur ses gonds. Un simple coup de vent pourrait
      la faire basculer, mais sa poignée a été arrachée.
  take:
    actor: "Vous prenez simplement la porte."
    effects:
      - type: ChangePropEffect
        modifs: -pushable
      - type: ChangePropEffect
        modifs: =salle2-000-ouest:activated
  push:
    actor: "Vous poussez simplement la porte. Elle tombe à terre."
    observer: "{{actor.name}} pousse légèrement une porte à droite de l'armoire. Elle tombe à terre."
    effects:
      - type: ChangePropEffect
        modifs: -pushable
      - type: ChangePropEffect
        modifs: =salle2-000-ouest:activated
---
id: portal-salle2-salle3-000
type: Portal
exits:
  - id: salle2-000-ouest
    location: salle2-000
    direction: ouest
    events:
      enter-portal:
        - props: exit:activated
          actor: "Vous passez par l'ouverture."
          observer: "{{actor.name}} passe par une petite ouverture à droite de l'armoire."
        - actor: "Il y a une vieille porte en bois qui vous bloque le passage."
          data-driven: true
  - id: salle3-000-est
    location: salle3-000
    direction: est
    events:
      enter-portal:
        actor: "Vous passez par la petite ouverture."
        observer: "{{actor.name}} rentre dans l'ouverture."
---
id: salle3-000
type: Location
contains:
  - koala-003
parts:
  - creeper-000
  - nez-koala-003
props:
  - weak
events:
  info:
    actor: "Petite salle très sombre"
  look:
    actor: |
      Vous arrivez dans une salle très sombre. La petite ouverture par laquelle vous êtes entré
      est la seule source de lumière. Vous apercevez tout de même une statue de koala semblant
      similaire à celle que vous avez déjà vue. Dans le coin le plus éloigné de votre position,
      une forme sombre reste immobile.
  #jump:
  #  actor: |
  #    Vous sautez. Vous sentez une douleur fulgurante vous traverser vos chevilles.
  #  observer: |
  #    Le sol craque.
  # marche po
---
id: koala-003
type: Thing
names:
  - koala
  - statue
events:
  info:
    actor: "Une statue de koala"
  look:
    actor: |
      Cette statue, bien que ressemblante à la première, n'y est en rien similaire. Vous la trouvez
      en effet nettement plus somptueuse. Peut-être est-ce son nez, qui cette fois ci, semble tout
      à fait banal, ou bien peut-être est-ce le reste de son visage, semblant plus vrai que nature.
---
id: nez-koala-003
type: Thing
name: nez
events:
  look:
    actor: |
      Ce nez vous semble bien plus ravissieux que celui de la première statue que vous avez rencontrée.
      Il ne vous semble pas que ce nez active un mécanisme cette fois ci.
---
id: creeper-000
type: Thing
names:
  - creeper
  - ombre
  - forme
  - créature
  - creature
props:
  - pushable
events:
  look:
    actor: |
      Vous regardez attentivement la forme au fond de la salle. Elle s'approche de vous.
      Dans la pénombre de la salle, vous voyez la forme de la créature. Elle est plus grande que vous
      et est étrangement lisse et rectangulaire. Elle avance à l'aide de quatre pieds, sans jambes,
      sans bras, le reste du corps immobile. La créature apparaît à la lumière. Elle est d'un vert criard.
      Son visage est dépourvue de nez. Ses yeux d'un noir profond vous observe. Sa bouche énorme, et toute
      aussi noire, émet un léger sifflement.
  push:
    actor: |
      Lorsque vous touchez la créature, le sifflement venant de sa bouche s'intensifie. Son corps tout
      entier commence à vibrer, et s'emplie d'une lumière éblouissante. Tout d'un coup... <br>
      <i> BOUM </i> L'explosion engendrée par la creature, vous projette sur un mur.
    observer: |
      {{actor.name}} s'approche de la créature et la touche du bout du doigt. La chose siffle bruyamment.
      Puis une explosion, semblant venir de la créature, vous projette sur un mur de la salle.
    effects:
      - type: EnterPortalEffect
        exit: =salle3-000-bas
---
id: portal-salle3-salle4-000
type: Portal
exits:
  - id: salle3-000-bas
    location: salle3-000
    events:
      enter-portal:
        actor: "Vous tombez."
        observer: "{{actor.name}} tombe et disparaît dans les ténèbres."
  - id: salle4-000-haut
    location: salle4-000
    events:
      enter-portal:
        actor: "Personne ne lira jamais cette phrase :/"
---
id: salle4-000
type: Location
events:
  info:
    actor: "Salle 4 enorme ouais"
  look:
    actor: |
      C'est la salle 4 ouais ya une pioche il casse tout, il meurt trois fois, go voir le gdoc